<?php
//==================================================
// システム：RSSシステム
// 機能    ：入力チェック共通関数定義
// 概要    ：
//==================================================

require_once 'util.inc';

//--------------------------------------------------
// 概要：入力チェッククラス
// 備考：全てstatic
//--------------------------------------------------
class Validator {
	//--------------------------------------------------
	// 概要：半角数字チェック
	// 引数：str チェックする文字列
	//       label 名前
	// 返値：エラーがなければnull、それ以外はエラー文字列
	//--------------------------------------------------
	function number($str, $label = '') {
		if ($label != '') $label .= 'は';
		if (!preg_match('/^\d+$/', $str)) return $label . '半角数字で入力してください';
		return null;
	}

	//--------------------------------------------------
	// 概要：半角英数字のチェック
	// 引数：str チェックする文字列
	//       label 名前
	// 返値：エラーがなければnull、それ以外はエラー文字列
	//--------------------------------------------------
	function alnumOnly($str, $label = '') {
		if ($label != '') $label .= 'は';
		if (!preg_match('/^[0-9A-Za-z]+$/', $str)) return $label . '半角英数字で入力してください';
		return null;
	}

	//--------------------------------------------------
	// 概要：日付チェック
	// 引数：str チェックする文字列
	//       label 名前
	// 返値：エラーがなければnull、それ以外はエラー文字列
	//--------------------------------------------------
	function date($str, $label = '') {
		if ($label != '') $label .= 'を';

		$year = (int)substr($str, 0, 4);
		$month = (int)substr($str, 5, 2);
		$day = (int)substr($str, 8);

		if (!checkdate($month, $day, $year)) return $label . '正しく入力してください';
		return null;
	}

};
